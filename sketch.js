const Engine = Matter.Engine;
const World= Matter.World;
const Bodies = Matter.Bodies;

var engine, world;
var ground, ball;
var gameState="PLAY"

function preload(){
    prisoner1=loadImage("prisoner1.png")
    cop1=loadImage("cop1.png")
    cop2=loadImage("cop2.png")
    cop3=loadImage("cop3.png")
}
function setup(){
    var canvas = createCanvas(windowWidth,windowHeight);
   a=createSprite(windowWidth/2+100,10,windowWidth,10)
   a1=createSprite(windowWidth/2-100,windowHeight-10,windowWidth,10)
   a2=createSprite(1,windowHeight/2,10,windowHeight)
   a3=createSprite(windowWidth-10,windowHeight/2,10,windowHeight)
   a4=createSprite(5,466,200,10)
   a5=createSprite(350,59,10,400)
   a6=createSprite(350,260,300,10)
   a7=createSprite(200,205,10,110)
   a8=createSprite(245,147,100,10)
   a9=createSprite(285,310,10,100)
   a10=createSprite(499,310,10,100)
   a11=createSprite(455,360,100,10)
   a12=createSprite(405,405,10,100)
   a13=createSprite(320,453,180,10)
   a14=createSprite(550,600,10,200)
   a15=createSprite(610,160,100,10)
   a16=createSprite(658,205,10,100)
   a17=createSprite(705,253,100,10)
   a18=createSprite(754,300,10,100)
   a19=createSprite(850,350,200,10)
   a20=createSprite(950,255,10,200)
   a21=createSprite(700,35,10,100)
   a22=createSprite(930,155,350,10)
   a23=createSprite(760,175,10,50)
   a24=createSprite(795,600,10,200)
   a25=createSprite(795,500,200,10)
   a26=createSprite(895,425,10,150)
   a27=createSprite(695,425,10,150)
   a28=createSprite(1280,390,150,10)
   a29=createSprite(1280,500,200,10)
   a30=createSprite(1210,415,10,50)
   edge=createEdgeSprites()
   prisoner=createSprite(61,28,10,10)
   prisoner.addImage(prisoner1)
   prisoner.scale=0.2
   officer1=createSprite(390,295,10,10)
   officer1.addImage(cop1)
   officer1.scale=0.3
   officer1.velocityX=5
   officer1.velocityY=-5
   officer2=createSprite(730,80,10,10)
   officer2.scale=0.3
   officer2.addImage(cop2)
   officer2.velocityY=5
   officer2.velocityX=5
   officer3=createSprite(640,590,10,10)
   officer3.scale=0.2
   officer3.addImage(cop3)
   officer3.velocityX=5
   officer3.velocityY=5
    //officer1.debug=true
  // officer2.debug=true
   // officer3.debug=true
   // prisoner.debug=true
    officer1.setCollider("rectangle",0,0,100,150)
    officer2.setCollider("rectangle",0,0,100,150)
    officer3.setCollider("rectangle",0,0,100,200)
    prisoner.setCollider("rectangle",0,0,100,130)
}

function draw(){
    background(0);
    if(gameState==="PLAY"){

    
    text("x :" +mouseX +", y : "+mouseY,mouseX,mouseY)
    textSize(25)
    text("START",20,20)
    text("END",1270,610)
    if(keyDown("DOWN_ARROW")){
        prisoner.y=prisoner.y+5
    }
    if(keyDown("UP_ARROW")){
        prisoner.y=prisoner.y-5
    }
    if(keyDown("LEFT_ARROW")){
        prisoner.x=prisoner.x-5
    }
    if(keyDown("RIGHT_ARROW")){
        prisoner.x=prisoner.x+5
    }
    officer1.bounceOff(edge)
    officer2.bounceOff(edge)
    officer3.bounceOff(edge)
   if(officer1.isTouching(a1)||officer1.isTouching(a2)||officer1.isTouching(a3)||officer1.isTouching(a4)||
   officer1.isTouching(a5)||officer1.isTouching(a6)||officer1.isTouching(a7)||officer1.isTouching(a8)||
   officer1.isTouching(a9)||officer1.isTouching(a10)||officer1.isTouching(a11)||officer1.isTouching(a12)||
   officer1.isTouching(a13)||officer1.isTouching(a14)||officer1.isTouching(a15)||officer1.isTouching(a16)||
   officer1.isTouching(a17)||officer1.isTouching(a18)||officer1.isTouching(a19)||officer1.isTouching(a20)||
   officer1.isTouching(a21)||officer1.isTouching(a22)||officer1.isTouching(a23)||officer1.isTouching(a24)||
   officer1.isTouching(a25)||officer1.isTouching(a26)||officer1.isTouching(a27)||officer1.isTouching(a28)||
   officer1.isTouching(a29)||officer1.isTouching(a30)){
       officer1.bounceOff(a1)
       officer1.bounceOff(a2)
       officer1.bounceOff(a3)
       officer1.bounceOff(a4)
       officer1.bounceOff(a5)
       officer1.bounceOff(a6)
       officer1.bounceOff(a7)
       officer1.bounceOff(a8)
       officer1.bounceOff(a9)
       officer1.bounceOff(a10)
       officer1.bounceOff(a11)
       officer1.bounceOff(a12)
       officer1.bounceOff(a13)
       officer1.bounceOff(a14)
       officer1.bounceOff(a15)
       officer1.bounceOff(a16)
       officer1.bounceOff(a17)
       officer1.bounceOff(a18)
       officer1.bounceOff(a19)
       officer1.bounceOff(a20)
       officer1.bounceOff(a21)
       officer1.bounceOff(a22)
       officer1.bounceOff(a23)
       officer1.bounceOff(a24)
       officer1.bounceOff(a25)
       officer1.bounceOff(a26)
       officer1.bounceOff(a27)
       officer1.bounceOff(a28)
       officer1.bounceOff(a29)
       officer1.bounceOff(a30)
   }
   officer1.bounceOff(edge)
   if(officer2.isTouching(a1)||officer2.isTouching(a2)||officer2.isTouching(a3)||officer1.isTouching(a4)||
   officer2.isTouching(a5)||officer2.isTouching(a6)||officer2.isTouching(a7)||officer2.isTouching(a8)||
   officer2.isTouching(a9)||officer2.isTouching(a10)||officer2.isTouching(a11)||officer2.isTouching(a12)||
   officer2.isTouching(a13)||officer2.isTouching(a14)||officer2.isTouching(a15)||officer2.isTouching(a16)||
   officer2.isTouching(a17)||officer2.isTouching(a18)||officer2.isTouching(a19)||officer2.isTouching(a20)||
   officer2.isTouching(a21)||officer2.isTouching(a22)||officer2.isTouching(a23)||officer2.isTouching(a24)||
   officer2.isTouching(a25)||officer2.isTouching(a26)||officer2.isTouching(a27)||officer2.isTouching(a28)||
   officer2.isTouching(a29)||officer2.isTouching(a30)){
       officer2.bounceOff(a1)
       officer2.bounceOff(a2)
       officer2.bounceOff(a3)
       officer2.bounceOff(a4)
       officer2.bounceOff(a5)
       officer2.bounceOff(a6)
       officer2.bounceOff(a7)
       officer2.bounceOff(a8)
       officer2.bounceOff(a9)
       officer2.bounceOff(a10)
       officer2.bounceOff(a11)
       officer2.bounceOff(a12)
       officer2.bounceOff(a13)
       officer2.bounceOff(a14)
       officer2.bounceOff(a15)
       officer2.bounceOff(a16)
       officer2.bounceOff(a17)
       officer2.bounceOff(a18)
       officer2.bounceOff(a19)
       officer2.bounceOff(a20)
       officer2.bounceOff(a21)
       officer2.bounceOff(a22)
       officer2.bounceOff(a23)
       officer2.bounceOff(a24)
       officer2.bounceOff(a25)
       officer2.bounceOff(a26)
       officer2.bounceOff(a27)
       officer2.bounceOff(a28)
       officer2.bounceOff(a29)
       officer2.bounceOff(a30)
   }
   officer3.bounceOff(edge)
   if(officer3.isTouching(a1)||officer3.isTouching(a2)||officer3.isTouching(a3)||officer3.isTouching(a4)||
   officer3.isTouching(a5)||officer3.isTouching(a6)||officer3.isTouching(a7)||officer3.isTouching(a8)||
   officer3.isTouching(a9)||officer3.isTouching(a10)||officer3.isTouching(a11)||officer3.isTouching(a12)||
   officer3.isTouching(a13)||officer3.isTouching(a14)||officer3.isTouching(a15)||officer3.isTouching(a16)||
   officer3.isTouching(a17)||officer3.isTouching(a18)||officer3.isTouching(a19)||officer3.isTouching(a20)||
   officer3.isTouching(a21)||officer3.isTouching(a22)||officer3.isTouching(a23)||officer3.isTouching(a24)||
   officer3.isTouching(a25)||officer3.isTouching(a26)||officer3.isTouching(a27)||officer3.isTouching(a28)||
   officer3.isTouching(a29)||officer3.isTouching(a30)){
       officer3.bounceOff(a1)
       officer3.bounceOff(a2)
       officer3.bounceOff(a3)
       officer3.bounceOff(a4)
       officer3.bounceOff(a5)
       officer3.bounceOff(a6)
       officer3.bounceOff(a7)
       officer3.bounceOff(a8)
       officer3.bounceOff(a9)
       officer3.bounceOff(a10)
       officer3.bounceOff(a11)
       officer3.bounceOff(a12)
       officer3.bounceOff(a13)
       officer3.bounceOff(a14)
       officer3.bounceOff(a15)
       officer3.bounceOff(a16)
       officer3.bounceOff(a17)
       officer3.bounceOff(a18)
       officer3.bounceOff(a19)
       officer3.bounceOff(a20)
       officer3.bounceOff(a21)
       officer3.bounceOff(a22)
       officer3.bounceOff(a23)
       officer3.bounceOff(a24)
       officer3.bounceOff(a25)
       officer3.bounceOff(a26)
       officer3.bounceOff(a27)
       officer3.bounceOff(a28)
       officer3.bounceOff(a29)
       officer3.bounceOff(a30)
   }
   prisoner.bounceOff(edge)
   if(prisoner.isTouching(a1)||prisoner.isTouching(a2)||prisoner.isTouching(a3)||prisoner.isTouching(a4)||
   prisoner.isTouching(a5)||prisoner.isTouching(a6)||prisoner.isTouching(a7)||prisoner.isTouching(a8)||
   prisoner.isTouching(a9)||prisoner.isTouching(a10)||prisoner.isTouching(a11)||prisoner.isTouching(a12)||
   prisoner.isTouching(a13)||prisoner.isTouching(a14)||prisoner.isTouching(a15)||prisoner.isTouching(a16)||
   prisoner.isTouching(a17)||prisoner.isTouching(a18)||prisoner.isTouching(a19)||prisoner.isTouching(a20)||
   prisoner.isTouching(a21)||prisoner.isTouching(a22)||prisoner.isTouching(a23)||prisoner.isTouching(a24)||
   prisoner.isTouching(a25)||prisoner.isTouching(a26)||prisoner.isTouching(a27)||prisoner.isTouching(a28)||
   prisoner.isTouching(a29)||prisoner.isTouching(a30)){
    prisoner.bounceOff(a1)
    prisoner.bounceOff(a2)
    prisoner.bounceOff(a3)
    prisoner.bounceOff(a4)
    prisoner.bounceOff(a5)
    prisoner.bounceOff(a6)
    prisoner.bounceOff(a7)
    prisoner.bounceOff(a8)
    prisoner.bounceOff(a9)
    prisoner.bounceOff(a10)
    prisoner.bounceOff(a11)
    prisoner.bounceOff(a12)
    prisoner.bounceOff(a13)
    prisoner.bounceOff(a14)
    prisoner.bounceOff(a15)
    prisoner.bounceOff(a16)
    prisoner.bounceOff(a17)
    prisoner.bounceOff(a18)
    prisoner.bounceOff(a19)
    prisoner.bounceOff(a20)
    prisoner.bounceOff(a21)
    prisoner.bounceOff(a22)
    prisoner.bounceOff(a23)
    prisoner.bounceOff(a24)
    prisoner.bounceOff(a25)
    prisoner.bounceOff(a26)
    prisoner.bounceOff(a27)
    prisoner.bounceOff(a28)
    prisoner.bounceOff(a29)
    prisoner.bounceOff(a30)
   }
   if(prisoner.isTouching(officer1)||prisoner.isTouching(officer2)||prisoner.isTouching(officer3)){
       prisoner.x=61
       prisoner.y=28
       officer1.velocityX=0
   officer1.velocityY=0
   officer2.velocityX=0
   officer2.velocityY=0
   officer3.velocityX=0
   officer3.velocityY=0
   gameState="END"
   }
    drawSprites()
    }
    if(gameState==="END"){
        textSize(50)
        text("GAME OVER",displayWidth/2-100,displayHeight/2-100)
        
    }
    

}